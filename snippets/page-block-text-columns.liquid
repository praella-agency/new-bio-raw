<div class="index-section" {% if block.settings.light_theme %}style="background-color: #fff;color: #1c1d1d;padding: 100px 0;margin: 0;"{% endif %}>
  <div class="page-width text-{{ block.settings.align_text }}" {% if block.settings.section_outline %}style="border: 5px solid  {% if block.settings.light_theme %}#1c1d1d{% else %}#fff{% endif %};padding: 80px;"{% endif %}>
    {% if block.settings.title != blank %}
      <div class="section-header" style="margin-bottom: 60px;">
        <h2>{{ block.settings.title }}</h2>
      </div>
    {% endif %}

    {%- assign text_column_count = 0 -%}
    {%- assign column_1_enabled = false -%}
    {%- assign column_2_enabled = false -%}
    {%- assign column_3_enabled = false -%}
    {%- assign column_4_enabled = false -%}
    {%- assign column_5_enabled = false -%}
    {%- assign column_6_enabled = false -%}
    
    {% if block.settings.enable_image_1 or block.settings.title_1 != blank or block.settings.text_1 != blank %}
      {%- assign column_1_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_2 or block.settings.title_2 != blank or block.settings.text_2 != blank %}
      {%- assign column_2_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_3 or block.settings.title_3 != blank or block.settings.text_3 != blank %}
      {%- assign column_3_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_4 or block.settings.title_4 != blank or block.settings.text_4 != blank %}
      {%- assign column_4_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_5 or block.settings.title_5 != blank or block.settings.text_5 != blank %}
      {%- assign column_5_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}
    {% if block.settings.enable_image_6 or block.settings.title_6 != blank or block.settings.text_6 != blank %}
      {%- assign column_6_enabled = true -%}
      {%- assign text_column_count = text_column_count | plus: 1 -%}
    {% endif %}

    {% case text_column_count %}
      {% when 1 %}
        {%- assign grid_item_width = '' -%}
      {% when 2 %}
        {%- assign grid_item_width = 'medium-up--one-half' -%}
      {% else %}
        {%- assign grid_item_width = 'medium-up--one-third' -%}
    {% endcase %}

    <div class="grid grid--flush-bottom">
      {% if column_1_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_1 %}
            {% if block.settings.button_link_1 != blank %}
              <a href="{{ block.settings.button_link_1 }}">
            {% endif %}
            {% if block.settings.image_1 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_1 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_1.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_1.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_1 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_1 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_1 }}</p>
          {% endif %}
          {% if block.settings.text_1 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_1 }}</div>
          {% endif %}
          {% if block.settings.button_label_1 != blank %}
            <a href="{{ block.settings.button_link_1 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_1 }}
            </a>
          {% endif %}
        </div>
      {% endif %}

      {% if column_2_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_2 %}
            {% if block.settings.button_link_2 != blank %}
              <a href="{{ block.settings.button_link_2 }}">
            {% endif %}
            {% if block.settings.image_2 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_2 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_2.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_2.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_2 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_2 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_2 }}</p>
          {% endif %}
          {% if block.settings.text_2 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_2 }}</div>
          {% endif %}
          {% if block.settings.button_label_2 != blank %}
            <a href="{{ block.settings.button_link_2 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_2 }}
            </a>
          {% endif %}
        </div>
      {% endif %}

      {% if column_3_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_3 %}
            {% if block.settings.button_link_3 != blank %}
              <a href="{{ block.settings.button_link_3 }}">
            {% endif %}
            {% if block.settings.image_3 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_3 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_3.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_3.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_3 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_3 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_3 }}</p>
          {% endif %}
          {% if block.settings.text_3 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_3 }}</div>
          {% endif %}
          {% if block.settings.button_label_3 != blank %}
            <a href="{{ block.settings.button_link_3 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_3 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      
      {% if column_4_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_4 %}
            {% if block.settings.button_link_4 != blank %}
              <a href="{{ block.settings.button_link_4 }}">
            {% endif %}
            {% if block.settings.image_4 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_4 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_4.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_4.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_4 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_4 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_4 }}</p>
          {% endif %}
          {% if block.settings.text_4 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_4 }}</div>
          {% endif %}
          {% if block.settings.button_label_4 != blank %}
            <a href="{{ block.settings.button_link_4 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_4 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      
      
      {% if column_5_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_5 %}
            {% if block.settings.button_link_5 != blank %}
              <a href="{{ block.settings.button_link_5 }}">
            {% endif %}
            {% if block.settings.image_5 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_5 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_5.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_5.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_5 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_5 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_5 }}</p>
          {% endif %}
          {% if block.settings.text_5 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_5 }}</div>
          {% endif %}
          {% if block.settings.button_label_5 != blank %}
            <a href="{{ block.settings.button_link_5 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_5 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
      
      {% if column_6_enabled %}
        <div class="grid__item {{ grid_item_width }}" data-aos="row-of-3">
          {% if block.settings.enable_image_6 %}
            {% if block.settings.button_link_6 != blank %}
              <a href="{{ block.settings.button_link_6 }}">
            {% endif %}
            {% if block.settings.image_6 != blank %}
              <div class="image-wrap text-spacing" style="height: 0; padding-bottom: {{ block.settings.image_width }}px;">
                {%- assign img_url = block.settings.image_6 | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                <img class="lazyload"
                    data-src="{{ img_url }}"
                    data-widths="[180, 360, 540, 720, 900, 1080]"
                    data-aspectratio="{{ block.settings.image_6.aspect_ratio }}"
                    data-sizes="auto"
                    alt="{{ block.settings.image_6.alt }}"
                   style="max-width: {{ block.settings.image_width }}px;height: {{ block.settings.image_width }}px;{% if block.settings.align_text == 'center' %}margin: 0 auto 15px;{% endif %}">
              </div>
            {% endif %}
            {% if block.settings.button_link_6 != blank %}
              </a>
            {% endif %}
          {% endif %}
          {% if block.settings.title_6 != blank %}
            <p class="h4" style="margin-top: 50px;">{{ block.settings.title_6 }}</p>
          {% endif %}
          {% if block.settings.text_6 != blank %}
            <div class="rte-setting text-spacing">{{ block.settings.text_6 }}</div>
          {% endif %}
          {% if block.settings.button_label_6 != blank %}
            <a href="{{ block.settings.button_link_6 }}" class="btn btn--secondary btn--small">
              {{ block.settings.button_label_6 }}
            </a>
          {% endif %}
        </div>
      {% endif %}
      
    </div>
  </div>
</div>
